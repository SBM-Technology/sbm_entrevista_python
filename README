# ğŸ“Š Dashboard AnalÃ­tico - Teste Python Pleno

## ğŸ¯ Sobre Este Teste

Este Ã© um **teste tÃ©cnico para desenvolvedores Python Pleno** focado em:
- âœ… **Python avanÃ§ado** - ManipulaÃ§Ã£o de dados, estruturas, lÃ³gica
- âœ… **VisualizaÃ§Ã£o de dados** - CriaÃ§Ã£o de dashboards interativos
- âœ… **Tratamento de dados** - ETL, agregaÃ§Ãµes, anÃ¡lises
- âœ… **Flask** - Desenvolvimento web com Python
- âœ… **IntegraÃ§Ã£o** - Coleta de dados de mÃºltiplas fontes

**NÃ£o Ã© necessÃ¡rio:** Criar testes unitÃ¡rios (foco em funcionalidade e qualidade do cÃ³digo)

---

## ğŸ“‹ O Que JÃ¡ EstÃ¡ Pronto

Este repositÃ³rio contÃ©m uma **estrutura base completa** para vocÃª comeÃ§ar:

âœ… **Backend Flask funcional**
- 5 Models (Venda, Custo, CotaÃ§Ã£o, Meta, Upload)
- Blueprints organizados
- Services para coleta e processamento

âœ… **Dados de exemplo**
- 1.000 vendas ao longo de 2024
- 20 produtos em 5 categorias
- 300 metas por regiÃ£o/categoria

âœ… **Frontend bÃ¡sico**
- Template Bootstrap 5
- 4 grÃ¡ficos funcionais (Chart.js)
- Filtros de perÃ­odo

âœ… **APIs pÃºblicas configuradas**
- AwesomeAPI (cotaÃ§Ãµes)
- Brasil API (taxas)

---

## ğŸ¯ O Que VocÃª Deve Fazer

Veja o arquivo **`DESAFIO.md`** para detalhes completos do que deve ser implementado/melhorado.

---

## ğŸš€ Tecnologias Utilizadas

- **Backend:** Flask 3.0, SQLAlchemy, pandas
- **Frontend:** Bootstrap 5, Chart.js
- **Banco de Dados:** SQLite (desenvolvimento)
- **APIs Externas:** AwesomeAPI (cotaÃ§Ãµes), Brasil API (taxas)
- **Python:** 3.11+

---

## ğŸ“ Estrutura do Projeto

```
sbm_entrevista_python/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py              # Factory da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ blueprints/              # Rotas organizadas
â”‚   â”‚   â”œâ”€â”€ dashboard.py         # Dashboard principal
â”‚   â”‚   â””â”€â”€ api.py               # Endpoints da API
â”‚   â”œâ”€â”€ models/                  # Models do banco de dados
â”‚   â”‚   â”œâ”€â”€ venda.py
â”‚   â”‚   â”œâ”€â”€ custo.py
â”‚   â”‚   â”œâ”€â”€ cotacao.py
â”‚   â”‚   â”œâ”€â”€ meta.py
â”‚   â”‚   â””â”€â”€ upload.py
â”‚   â”œâ”€â”€ services/                # LÃ³gica de negÃ³cio
â”‚   â”‚   â”œâ”€â”€ data_collector.py   # Coleta de APIs
â”‚   â”‚   â”œâ”€â”€ data_processor.py   # Processamento de dados
â”‚   â”‚   â””â”€â”€ analytics.py        # AnÃ¡lises estatÃ­sticas
â”‚   â”œâ”€â”€ static/                  # CSS, JavaScript
â”‚   â””â”€â”€ templates/               # Templates HTML
â”œâ”€â”€ data/                        # Dados do projeto
â”‚   â”œâ”€â”€ csv/                     # Arquivos CSV
â”‚   â”‚   â”œâ”€â”€ vendas.csv
â”‚   â”‚   â””â”€â”€ custos.csv
â”‚   â”œâ”€â”€ json/                    # Arquivos JSON
â”‚   â”‚   â””â”€â”€ metas.json
â”‚   â””â”€â”€ uploads/                 # Uploads do usuÃ¡rio
â”œâ”€â”€ docs/                        # DocumentaÃ§Ã£o
â”‚   â””â”€â”€ API_PUBLICA_REFERENCIAS.md
â”œâ”€â”€ scripts/                     # Scripts utilitÃ¡rios
â”‚   â”œâ”€â”€ generate_sample_data.py
â”‚   â””â”€â”€ import_initial_data.py
â”œâ”€â”€ tests/                       # Testes
â”œâ”€â”€ app.py                       # Entry point
â”œâ”€â”€ config.py                    # ConfiguraÃ§Ãµes
â”œâ”€â”€ requirements.txt             # DependÃªncias
â”œâ”€â”€ DESAFIO.md                   # DescriÃ§Ã£o do desafio
â””â”€â”€ README.md                    # Este arquivo
```

---

## âš™ï¸ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### 1. PrÃ©-requisitos

- Python 3.11 ou superior
- pip (gerenciador de pacotes Python)
- Git

### 2. Clone o RepositÃ³rio

```bash
git clone <url-do-repositorio>
cd sbm_entrevista_python
```

### 3. Crie e Ative o Ambiente Virtual

**Linux/Mac:**
```bash
python3.11 -m venv venv
source venv/bin/activate
```

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

### 4. Instale as DependÃªncias

```bash
pip install -r requirements.txt
```

### 5. Configure as VariÃ¡veis de Ambiente (opcional)

Crie um arquivo `.env` na raiz do projeto:

```env
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=sua-chave-secreta-aqui
DATABASE_URL=sqlite:///instance/dashboard.db
```

---

## ğŸ² Gerando Dados de Exemplo

Os dados de exemplo jÃ¡ foram gerados, mas vocÃª pode regerÃ¡-los:

```bash
python3.11 scripts/generate_sample_data.py
```

Isso irÃ¡ criar:
- `data/csv/vendas.csv` - 1000 registros de vendas
- `data/csv/custos.csv` - 20 produtos com custos
- `data/json/metas.json` - Metas por categoria/regiÃ£o/mÃªs

---

## ğŸ’¾ Inicializando o Banco de Dados

### OpÃ§Ã£o 1: Usando o script de importaÃ§Ã£o

```bash
python3.11 scripts/import_initial_data.py
```

Este script irÃ¡:
1. Criar as tabelas no banco de dados
2. Importar os dados de vendas, custos e metas
3. Exibir estatÃ­sticas da importaÃ§Ã£o

### OpÃ§Ã£o 2: Via Flask CLI

```bash
flask init-db
flask import-data
```

---

## ğŸƒ Executando a AplicaÃ§Ã£o

### âš ï¸ IMPORTANTE: Use o run.py

```bash
python3.11 run.py
```

**NÃ£o use** `python3.11 app.py` (causa problemas com o watchdog)

A aplicaÃ§Ã£o estarÃ¡ disponÃ­vel em: **http://localhost:5100**

---

## ğŸ§ª Testando a AplicaÃ§Ã£o

### Teste Manual

1. Acesse http://localhost:5000
2. Visualize os KPIs e grÃ¡ficos
3. Teste os filtros de data
4. FaÃ§a upload de um CSV via modal
5. Verifique a atualizaÃ§Ã£o dos dados

---

## ğŸ“Š Funcionalidades Principais

### Dashboard
- **KPIs:** Receita total, nÃºmero de vendas, ticket mÃ©dio
- **GrÃ¡fico de Linhas:** EvoluÃ§Ã£o de vendas ao longo do tempo
- **GrÃ¡fico de Barras:** Vendas por categoria
- **GrÃ¡fico de Pizza:** DistribuiÃ§Ã£o por regiÃ£o
- **GrÃ¡fico Horizontal:** Top 10 produtos mais vendidos

### Upload de Dados
- Upload de arquivos CSV
- ValidaÃ§Ã£o de formato
- Feedback de processamento
- HistÃ³rico de uploads

### Filtros
- Filtro por perÃ­odo (data inicial/final)
- AtualizaÃ§Ã£o dinÃ¢mica de todos os grÃ¡ficos
- Limpeza de filtros

### APIs Externas
- Coleta de cotaÃ§Ãµes (AwesomeAPI)
- Coleta de taxas (Brasil API)
- Cache de resultados
- Tratamento de erros

---

## ğŸ”Œ Endpoints da API

### Dashboard

```
GET /
PÃ¡gina principal do dashboard

GET /data/kpis?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna KPIs principais

GET /data/vendas-tempo?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna sÃ©rie temporal de vendas

GET /data/vendas-categoria?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna vendas agregadas por categoria

GET /data/vendas-regiao?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna vendas agregadas por regiÃ£o

GET /data/top-produtos?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD&limite=10
Retorna top N produtos mais vendidos
```

### API Interna

```
POST /api/upload
Upload de arquivo CSV
Form data: file, tipo

POST /api/cotacoes/atualizar
Atualiza cotaÃ§Ãµes de moedas via API externa

GET /api/uploads
Lista histÃ³rico de uploads
```

---

## ğŸ—„ï¸ Modelo de Dados

### Vendas
```sql
id, data, produto, categoria, quantidade, preco_unitario,
valor_total, regiao, vendedor, created_at
```

### Custos
```sql
id, produto, categoria, custo_unitario, data_atualizacao, created_at
```

### CotaÃ§Ãµes
```sql
id, moeda, valor, data_hora, created_at
```

### Metas
```sql
id, ano, mes, categoria, regiao, meta_valor, meta_quantidade, created_at
```

### Uploads
```sql
id, nome_arquivo, tipo, status, num_registros, mensagem_erro, created_at
```

---

## ğŸŒ APIs Externas Utilizadas

### AwesomeAPI - CotaÃ§Ãµes de Moedas
- **Docs:** https://docs.awesomeapi.com.br/api-de-moedas
- **Endpoint:** `https://economia.awesomeapi.com.br/last/USD-BRL,EUR-BRL`
- **Uso:** Coleta de cotaÃ§Ãµes de moedas
- **Cache:** 5 minutos

### Brasil API - Dados EconÃ´micos
- **Docs:** https://brasilapi.com.br/docs
- **Endpoint:** `https://brasilapi.com.br/api/taxas/v1`
- **Uso:** Taxas de juros (SELIC, CDI)
- **Cache:** 1 hora

Ver documentaÃ§Ã£o completa em: `docs/API_PUBLICA_REFERENCIAS.md`

---

## ğŸ› ï¸ Desenvolvimento

### Adicionando Novas Funcionalidades

1. **Models:** Adicione em `app/models/`
2. **Rotas:** Adicione em `app/blueprints/`
3. **Services:** Adicione lÃ³gica em `app/services/`
4. **Templates:** Adicione em `app/templates/`
5. **Testes:** Adicione em `tests/`

### Boas PrÃ¡ticas

- Use type hints
- Documente funÃ§Ãµes com docstrings
- Siga PEP 8
- Escreva testes
- Use migrations para mudanÃ§as no banco

---

## ğŸ“ TODO / Melhorias Futuras

- [ ] Implementar testes automatizados
- [ ] Adicionar autenticaÃ§Ã£o de usuÃ¡rios
- [ ] Implementar paginaÃ§Ã£o nas tabelas
- [ ] Adicionar exportaÃ§Ã£o de relatÃ³rios (PDF)
- [ ] Implementar agendamento de coletas (Celery)
- [ ] Adicionar mais anÃ¡lises estatÃ­sticas
- [ ] Implementar cache com Redis
- [ ] Melhorar responsividade mobile
- [ ] Adicionar dark mode
- [ ] Dockerizar a aplicaÃ§Ã£o

---

## ğŸ› Troubleshooting

### Erro: "ModuleNotFoundError"
```bash
# Certifique-se de ter ativado o ambiente virtual
source venv/bin/activate  # ou venv\Scripts\activate no Windows

# Reinstale as dependÃªncias
pip install -r requirements.txt
```

### Erro: "Unable to open database file"
```bash
# Crie o diretÃ³rio instance
mkdir -p instance

# Execute novamente
python3.11 scripts/import_initial_data.py
```

### Erro no import dos dados
```bash
# Verifique se os arquivos CSV existem
ls -la data/csv/

# Se necessÃ¡rio, regere os dados
python3.11 scripts/generate_sample_data.py
```

### GrÃ¡ficos nÃ£o aparecem
- Verifique o console do navegador (F12)
- Certifique-se de que hÃ¡ dados no banco
- Limpe o cache do navegador

---

## ğŸ“„ LicenÃ§a

Este projeto Ã© para fins educacionais e de avaliaÃ§Ã£o tÃ©cnica.

---

## ğŸ“§ Contato

Para dÃºvidas sobre o desafio, entre em contato com o recrutador.

---

## ğŸ¯ CritÃ©rios de AvaliaÃ§Ã£o

### O que serÃ¡ avaliado:

**1. Python e ManipulaÃ§Ã£o de Dados (40%)**
- Processamento eficiente de dados (pandas, agregaÃ§Ãµes)
- ValidaÃ§Ã£o e limpeza de dados
- ETL bem implementado
- Queries otimizadas
- Tratamento de erros

**2. VisualizaÃ§Ã£o e Dashboard (30%)**
- GrÃ¡ficos apropriados e informativos
- Interface intuitiva e responsiva
- Filtros funcionando corretamente
- Escolha adequada de visualizaÃ§Ãµes
- UX/UI pensada

**3. CÃ³digo e Arquitetura (20%)**
- OrganizaÃ§Ã£o clara do cÃ³digo
- Boas prÃ¡ticas Python (PEP 8)
- Type hints e docstrings
- SeparaÃ§Ã£o de responsabilidades
- Estrutura do projeto

**4. Funcionalidade (10%)**
- Features funcionando corretamente
- IntegraÃ§Ã£o com APIs
- Upload de arquivos
- Tratamento de casos edge

**Extras (BÃ´nus):**
- Cache implementado
- AnÃ¡lises estatÃ­sticas avanÃ§adas
- DocumentaÃ§Ã£o detalhada
- OtimizaÃ§Ãµes de performance

**âŒ NÃ£o Ã© necessÃ¡rio:**
- Testes unitÃ¡rios (opcional)
- Deploy em produÃ§Ã£o
- AutenticaÃ§Ã£o de usuÃ¡rios

---

**Desenvolvido como teste tÃ©cnico para vaga de Python Pleno** ğŸš€