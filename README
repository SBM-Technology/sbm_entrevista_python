# ğŸ“Š Dashboard AnalÃ­tico - Teste Python Pleno

Este Ã© um projeto de teste tÃ©cnico para avaliar competÃªncias em Python, Flask, manipulaÃ§Ã£o de dados e visualizaÃ§Ãµes.

## ğŸ“‹ Sobre o Projeto

Dashboard analÃ­tico que integra dados de mÃºltiplas fontes (CSV, APIs pÃºblicas, JSON) para anÃ¡lise de vendas, apresentando:
- KPIs principais (receita, ticket mÃ©dio, nÃºmero de vendas)
- GrÃ¡ficos interativos (linhas, barras, pizza)
- IntegraÃ§Ã£o com APIs de cotaÃ§Ãµes e dados econÃ´micos
- Sistema de upload de arquivos CSV
- Filtros por perÃ­odo

---

## ğŸš€ Tecnologias Utilizadas

- **Backend:** Flask 3.0, SQLAlchemy, pandas
- **Frontend:** Bootstrap 5, Chart.js
- **Banco de Dados:** SQLite (desenvolvimento)
- **APIs Externas:** AwesomeAPI (cotaÃ§Ãµes), Brasil API (taxas)
- **Python:** 3.11+

---

## ğŸ“ Estrutura do Projeto

```
sbm_entrevista_python/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py              # Factory da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ blueprints/              # Rotas organizadas
â”‚   â”‚   â”œâ”€â”€ dashboard.py         # Dashboard principal
â”‚   â”‚   â””â”€â”€ api.py               # Endpoints da API
â”‚   â”œâ”€â”€ models/                  # Models do banco de dados
â”‚   â”‚   â”œâ”€â”€ venda.py
â”‚   â”‚   â”œâ”€â”€ custo.py
â”‚   â”‚   â”œâ”€â”€ cotacao.py
â”‚   â”‚   â”œâ”€â”€ meta.py
â”‚   â”‚   â””â”€â”€ upload.py
â”‚   â”œâ”€â”€ services/                # LÃ³gica de negÃ³cio
â”‚   â”‚   â”œâ”€â”€ data_collector.py   # Coleta de APIs
â”‚   â”‚   â”œâ”€â”€ data_processor.py   # Processamento de dados
â”‚   â”‚   â””â”€â”€ analytics.py        # AnÃ¡lises estatÃ­sticas
â”‚   â”œâ”€â”€ static/                  # CSS, JavaScript
â”‚   â””â”€â”€ templates/               # Templates HTML
â”œâ”€â”€ data/                        # Dados do projeto
â”‚   â”œâ”€â”€ csv/                     # Arquivos CSV
â”‚   â”‚   â”œâ”€â”€ vendas.csv
â”‚   â”‚   â””â”€â”€ custos.csv
â”‚   â”œâ”€â”€ json/                    # Arquivos JSON
â”‚   â”‚   â””â”€â”€ metas.json
â”‚   â””â”€â”€ uploads/                 # Uploads do usuÃ¡rio
â”œâ”€â”€ docs/                        # DocumentaÃ§Ã£o
â”‚   â””â”€â”€ API_PUBLICA_REFERENCIAS.md
â”œâ”€â”€ scripts/                     # Scripts utilitÃ¡rios
â”‚   â”œâ”€â”€ generate_sample_data.py
â”‚   â””â”€â”€ import_initial_data.py
â”œâ”€â”€ tests/                       # Testes
â”œâ”€â”€ app.py                       # Entry point
â”œâ”€â”€ config.py                    # ConfiguraÃ§Ãµes
â”œâ”€â”€ requirements.txt             # DependÃªncias
â”œâ”€â”€ DESAFIO.md                   # DescriÃ§Ã£o do desafio
â””â”€â”€ README.md                    # Este arquivo
```

---

## âš™ï¸ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### 1. PrÃ©-requisitos

- Python 3.11 ou superior
- pip (gerenciador de pacotes Python)
- Git

### 2. Clone o RepositÃ³rio

```bash
git clone <url-do-repositorio>
cd sbm_entrevista_python
```

### 3. Crie e Ative o Ambiente Virtual

**Linux/Mac:**
```bash
python3.11 -m venv venv
source venv/bin/activate
```

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

### 4. Instale as DependÃªncias

```bash
pip install -r requirements.txt
```

### 5. Configure as VariÃ¡veis de Ambiente (opcional)

Crie um arquivo `.env` na raiz do projeto:

```env
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=sua-chave-secreta-aqui
DATABASE_URL=sqlite:///instance/dashboard.db
```

---

## ğŸ² Gerando Dados de Exemplo

Os dados de exemplo jÃ¡ foram gerados, mas vocÃª pode regerÃ¡-los:

```bash
python3.11 scripts/generate_sample_data.py
```

Isso irÃ¡ criar:
- `data/csv/vendas.csv` - 1000 registros de vendas
- `data/csv/custos.csv` - 20 produtos com custos
- `data/json/metas.json` - Metas por categoria/regiÃ£o/mÃªs

---

## ğŸ’¾ Inicializando o Banco de Dados

### OpÃ§Ã£o 1: Usando o script de importaÃ§Ã£o

```bash
python3.11 scripts/import_initial_data.py
```

Este script irÃ¡:
1. Criar as tabelas no banco de dados
2. Importar os dados de vendas, custos e metas
3. Exibir estatÃ­sticas da importaÃ§Ã£o

### OpÃ§Ã£o 2: Via Flask CLI

```bash
flask init-db
flask import-data
```

---

## ğŸƒ Executando a AplicaÃ§Ã£o

### Modo Desenvolvimento

```bash
python3.11 app.py
```

Ou usando Flask CLI:

```bash
flask run
```

A aplicaÃ§Ã£o estarÃ¡ disponÃ­vel em: **http://localhost:5000**

### Modo Debug (com auto-reload)

```bash
export FLASK_ENV=development  # Linux/Mac
set FLASK_ENV=development     # Windows

flask run --debug
```

---

## ğŸ§ª Testando a AplicaÃ§Ã£o

### Testes Automatizados (quando implementados)

```bash
pytest
```

Com cobertura:

```bash
pytest --cov=app tests/
```

### Teste Manual

1. Acesse http://localhost:5000
2. Visualize os KPIs e grÃ¡ficos
3. Teste os filtros de data
4. FaÃ§a upload de um CSV via modal
5. Verifique a atualizaÃ§Ã£o dos dados

---

## ğŸ“Š Funcionalidades Principais

### Dashboard
- **KPIs:** Receita total, nÃºmero de vendas, ticket mÃ©dio
- **GrÃ¡fico de Linhas:** EvoluÃ§Ã£o de vendas ao longo do tempo
- **GrÃ¡fico de Barras:** Vendas por categoria
- **GrÃ¡fico de Pizza:** DistribuiÃ§Ã£o por regiÃ£o
- **GrÃ¡fico Horizontal:** Top 10 produtos mais vendidos

### Upload de Dados
- Upload de arquivos CSV
- ValidaÃ§Ã£o de formato
- Feedback de processamento
- HistÃ³rico de uploads

### Filtros
- Filtro por perÃ­odo (data inicial/final)
- AtualizaÃ§Ã£o dinÃ¢mica de todos os grÃ¡ficos
- Limpeza de filtros

### APIs Externas
- Coleta de cotaÃ§Ãµes (AwesomeAPI)
- Coleta de taxas (Brasil API)
- Cache de resultados
- Tratamento de erros

---

## ğŸ”Œ Endpoints da API

### Dashboard

```
GET /
PÃ¡gina principal do dashboard

GET /data/kpis?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna KPIs principais

GET /data/vendas-tempo?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna sÃ©rie temporal de vendas

GET /data/vendas-categoria?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna vendas agregadas por categoria

GET /data/vendas-regiao?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD
Retorna vendas agregadas por regiÃ£o

GET /data/top-produtos?data_inicio=YYYY-MM-DD&data_fim=YYYY-MM-DD&limite=10
Retorna top N produtos mais vendidos
```

### API Interna

```
POST /api/upload
Upload de arquivo CSV
Form data: file, tipo

POST /api/cotacoes/atualizar
Atualiza cotaÃ§Ãµes de moedas via API externa

GET /api/uploads
Lista histÃ³rico de uploads
```

---

## ğŸ—„ï¸ Modelo de Dados

### Vendas
```sql
id, data, produto, categoria, quantidade, preco_unitario,
valor_total, regiao, vendedor, created_at
```

### Custos
```sql
id, produto, categoria, custo_unitario, data_atualizacao, created_at
```

### CotaÃ§Ãµes
```sql
id, moeda, valor, data_hora, created_at
```

### Metas
```sql
id, ano, mes, categoria, regiao, meta_valor, meta_quantidade, created_at
```

### Uploads
```sql
id, nome_arquivo, tipo, status, num_registros, mensagem_erro, created_at
```

---

## ğŸŒ APIs Externas Utilizadas

### AwesomeAPI - CotaÃ§Ãµes de Moedas
- **Docs:** https://docs.awesomeapi.com.br/api-de-moedas
- **Endpoint:** `https://economia.awesomeapi.com.br/last/USD-BRL,EUR-BRL`
- **Uso:** Coleta de cotaÃ§Ãµes de moedas
- **Cache:** 5 minutos

### Brasil API - Dados EconÃ´micos
- **Docs:** https://brasilapi.com.br/docs
- **Endpoint:** `https://brasilapi.com.br/api/taxas/v1`
- **Uso:** Taxas de juros (SELIC, CDI)
- **Cache:** 1 hora

Ver documentaÃ§Ã£o completa em: `docs/API_PUBLICA_REFERENCIAS.md`

---

## ğŸ› ï¸ Desenvolvimento

### Adicionando Novas Funcionalidades

1. **Models:** Adicione em `app/models/`
2. **Rotas:** Adicione em `app/blueprints/`
3. **Services:** Adicione lÃ³gica em `app/services/`
4. **Templates:** Adicione em `app/templates/`
5. **Testes:** Adicione em `tests/`

### Boas PrÃ¡ticas

- Use type hints
- Documente funÃ§Ãµes com docstrings
- Siga PEP 8
- Escreva testes
- Use migrations para mudanÃ§as no banco

---

## ğŸ“ TODO / Melhorias Futuras

- [ ] Implementar testes automatizados
- [ ] Adicionar autenticaÃ§Ã£o de usuÃ¡rios
- [ ] Implementar paginaÃ§Ã£o nas tabelas
- [ ] Adicionar exportaÃ§Ã£o de relatÃ³rios (PDF)
- [ ] Implementar agendamento de coletas (Celery)
- [ ] Adicionar mais anÃ¡lises estatÃ­sticas
- [ ] Implementar cache com Redis
- [ ] Melhorar responsividade mobile
- [ ] Adicionar dark mode
- [ ] Dockerizar a aplicaÃ§Ã£o

---

## ğŸ› Troubleshooting

### Erro: "ModuleNotFoundError"
```bash
# Certifique-se de ter ativado o ambiente virtual
source venv/bin/activate  # ou venv\Scripts\activate no Windows

# Reinstale as dependÃªncias
pip install -r requirements.txt
```

### Erro: "Unable to open database file"
```bash
# Crie o diretÃ³rio instance
mkdir -p instance

# Execute novamente
python3.11 scripts/import_initial_data.py
```

### Erro no import dos dados
```bash
# Verifique se os arquivos CSV existem
ls -la data/csv/

# Se necessÃ¡rio, regere os dados
python3.11 scripts/generate_sample_data.py
```

### GrÃ¡ficos nÃ£o aparecem
- Verifique o console do navegador (F12)
- Certifique-se de que hÃ¡ dados no banco
- Limpe o cache do navegador

---

## ğŸ“„ LicenÃ§a

Este projeto Ã© para fins educacionais e de avaliaÃ§Ã£o tÃ©cnica.

---

## ğŸ“§ Contato

Para dÃºvidas sobre o desafio, entre em contato com o recrutador.

---

## ğŸ¯ CritÃ©rios de AvaliaÃ§Ã£o

Este projeto serÃ¡ avaliado nos seguintes aspectos:

- âœ… **Funcionalidade:** Todas as features implementadas e funcionando
- âœ… **CÃ³digo:** OrganizaÃ§Ã£o, clareza, boas prÃ¡ticas Python
- âœ… **Arquitetura:** SeparaÃ§Ã£o de responsabilidades, estrutura do projeto
- âœ… **Dados:** Processamento eficiente, anÃ¡lises corretas
- âœ… **Interface:** VisualizaÃ§Ãµes apropriadas, usabilidade
- âœ… **DocumentaÃ§Ã£o:** README claro, cÃ³digo documentado
- âœ… **Extras:** Testes, cache, otimizaÃ§Ãµes, criatividade

---

**Desenvolvido como teste tÃ©cnico para vaga de Python Pleno** ğŸš€